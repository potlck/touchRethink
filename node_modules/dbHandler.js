module.exports = {
	init: function() {
    	r = require('rethinkdb')
		http = require('http');
		path = require('path')

    	var temp = path.dirname(require.main.filename);
    	var name = path.basename(temp);

    	r.connect({ host: 'localhost', port: 28015 }, function(err, conn) {
  			if(err) throw err;
  			r.dbList().run(conn, function(err, dbs) {
  				if(err) throw err;
				console.log("Got DB list");
				if (dbs.indexOf(name) > -1) {
					console.log("Db exists");
				} else {
					console.log("Db does not exist");
					r.dbCreate(name).run(conn, function(err, other) {
						if (err) throw err;
					});
				}
  			});
		});
		return name;
	},
	tableCreate: function(name, table) {
		r.db(name).tableCreate(table).run(conn, function(err) {
			if(err) throw err;
		});
	},
	tableDrop: function(name, table) {
		r.db(name).tableDrop(table).run(conn, function(err) {
			if(err) throw err;
		});
	},
	insert: function(name, table, json) {
		r.db(name).insert(json).run(conn, function(err) {
			if(err) throw err;
		});
	},
	delete: function(name, table, json) {
		r.db(name).insert(json).run(conn, function(err) {
			if(err) throw err;
		});
	}
};

//fs = require("fs");
//args = process.argv.slice(2);
//console.log(args)

// grab path of where it's running and thing 
//in the directory above you will be the app id

// from within the module can I get the path of 
